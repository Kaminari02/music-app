## music-api

Музыкальное приложение

## Команды

### Установка

Для установки приложения необходимо прописать следующие команды в терминал: 

1. cd music-api 
2. npm i

### Запуск приложения

Для запуска приложения необходимо прописать следующие команды в терминал:

1. cd music-api 
2. npm run dev

### Запуск фикстур

Для запуска фикстур необходимо прописать следующие команды в терминал:

1. cd music-api 
2. npm run fixture


## Endpoints

### `localhost:8000/`

Основной эндпоинт

### `GET /artists`

Получить список всех исполнителей в виде массива объектов.

### `POST /artists`

Создать исполнителя. Принимает информацию в виде formData. Обязательные поля: 1. title: Имя исполнителя(string), 2. image: Фото(string), 3. description: Информация(string).

### `GET /albums || /albums?artist=....`

Получить все альбомы в виде массива объектов. Также можно передать ID "artist" как query-параметр и получить список альбомов конкретного исполнителя. (/albums?artist=....).

### `POST /albums`

Создать альбом. Принимает информацию в виде formData. Обязательные поля: 1. title: Название(string), 2. artist: Исполнитель(должен хранить ObjectId сущности Artist)(string), 3.  release_date: Год Выпуска(string), 4. image: Изображение обложки(string).

### `GET /albums/:id`

Получить информацию о конкретном альбоме, включая информацию о его исполнителе.

### `GET /tracks  || /tracks?album=....`

Получить все треки в виде массива объектов. Также можно передать ID "album" как query-параметр и получить список треков в конкретном альбоме. (/tracks?album=....).

### `POST /tracks`

Создать трек. Принимает информацию в виде JSON. Обязательные поля: 1. title: Название(string), 2. album: Альбом(должен хранить ObjectId сущности Album)(string), 3. duration: Продолжительность(string).

### `POST /auth/signup`

Регистрация (создание) нового пользователя. Принимает информацию в виде JSON. Обязательные поля: 1. username: имя пользователя(string), 2. password: пароль(string). Также на стороне сервера создается token-ключ для доступа в систему.

### `POST /auth/signin`

Логин пользователя. Принимает информацию в виде JSON. Обязательные поля: 1. username: имя пользователя(string), 2. password: пароль(string). При этом производится проверка на правильность введенных данных. В случае, если имя пользователя или пароль будут неверными с сервера вернется соответствующая ошибка. При правильно введенной информации пересоздается токен и возвращается информация о пользователе.

### `POST /track_history`

Принимает токен аутентификации через заголовки запроса, например:
Authorization: 5enDI2paOqusPavVWOnwB
Используя этот параметр происходит поиск пользователя с таким token. Если пользователь не найден, token считается неверным и возвращается ответ с ошибкой 401 Unauthorized. 
Также принимает один параметр через тело запроса (JSON): track - это ID прослушанной композиции. На сервере создается в базе данных запись, связанная с этим track ID а также с тем пользователем, который был найден в прошлом шаге, а также с текущей датой.